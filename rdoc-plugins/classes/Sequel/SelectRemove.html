<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Sequel::SelectRemove</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>module</span>
          Sequel::SelectRemove
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../files/lib/sequel/extensions/select_remove_rb.html">lib/sequel/extensions/select_remove.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../Sequel.html">Sequel</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'></div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-select_remove">select_remove</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-select_remove'>
                <a name='method-i-select_remove'></a>
                <div class='synopsis'>
                  <span class='name'>select_remove</span>
                  <span class='arguments'>(*cols)</span>
                </div>
                <div class='description'>
                  
                  <p>Remove columns from the list of selected columns.  If any of the currently
                  selected columns use expressions/aliases, this will remove selected columns
                  with the given aliases.  It will also remove entries from the selection
                  that match exactly:</p>
                  
                  <pre># Assume columns a, b, and c in items table&#x000A;DB[:items] # SELECT * FROM items&#x000A;DB[:items].select_remove(:c) # SELECT a, b FROM items&#x000A;DB[:items].select(:a, :b___c, :c___b).select_remove(:c) # SELECT a, c AS b FROM items&#x000A;DB[:items].select(:a, :b___c, :c___b).select_remove(:c___b) # SELECT a, b AS c FROM items</pre>
                  
                  <p>Note that there are a few cases where this method may not work correctly:</p>
                  <ul><li>
                  <p>This dataset joins multiple tables and does not have an existing explicit
                  selection. In this case, the code will currently use unqualified column
                  names for all columns the dataset returns, except for the columns given.</p>
                  </li><li>
                  <p>This dataset has an existing explicit selection containing an item that
                  returns multiple database columns (e.g. Sequel.expr(:table).*,
                  Sequel.lit(‘column1, column2’)).  In this case, the behavior is undefined
                  and this method should not be used.</p>
                  </li></ul>
                  
                  <p>There may be other cases where this method does not work correctly, use it
                  with caution.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-select_remove-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-select_remove-source'><span class="ruby-comment"># File lib/sequel/extensions/select_remove.rb, line 37</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">select_remove</span>(*<span class="ruby-identifier">cols</span>)&#x000A;  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">sel</span> = <span class="ruby-ivar">@opts</span>[<span class="ruby-value">:select</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">sel</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-identifier">select</span>(*(<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">sel</span>).<span class="ruby-identifier">reject</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cols</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">c</span>)}.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span>, <span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>} <span class="ruby-operator">-</span> <span class="ruby-identifier">cols</span>))&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">select</span>(*(<span class="ruby-identifier">columns</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cols</span>))&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
