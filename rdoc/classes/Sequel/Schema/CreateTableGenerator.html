<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Sequel::Schema::CreateTableGenerator</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Sequel::Schema::CreateTableGenerator
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../../files/lib/sequel/database/schema_generator_rb.html">lib/sequel/database/schema_generator.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../Schema.html">Schema</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p><a href="CreateTableGenerator.html">Schema::CreateTableGenerator</a> is an
            internal class that the user is not expected to instantiate directly. 
            Instances are created by <a
            href="../Database.html#method-i-create_table">Sequel::Database#create_table</a>.
            It is used to specify table creation parameters.  It takes a <a
            href="../Database.html">Database</a> object and a block of
            column/index/constraint specifications, and gives the <a
            href="../Database.html">Database</a> a table description, which the
            database uses to create a table.</p>
            
            <p><a href="CreateTableGenerator.html">Schema::CreateTableGenerator</a> has
            some methods but also includes <a
            href="CreateTableGenerator.html#method-i-method_missing">#method_missing</a>,
            allowing users to specify column type as a method instead of using the
            column method, which makes for a nicer DSL.</p>
            
            <p>For more information on Sequel’s support for schema modification, see the
            <a href="../../../files/doc/schema_modification_rdoc.html">“Schema
            Modification” guide</a></p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-add_type_method">add_type_method</a></li>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-check">check</a></li>
              <li><a target="docwin" href="#method-i-column">column</a></li>
              <li><a target="docwin" href="#attribute-i-columns">columns</a></li>
              <li><a target="docwin" href="#method-i-constraint">constraint</a></li>
              <li><a target="docwin" href="#attribute-i-constraints">constraints</a></li>
              <li><a target="docwin" href="#method-i-foreign_key">foreign_key</a></li>
              <li><a target="docwin" href="#method-i-full_text_index">full_text_index</a></li>
              <li><a target="docwin" href="#method-i-has_column-3F">has_column?</a></li>
              <li><a target="docwin" href="#method-i-index">index</a></li>
              <li><a target="docwin" href="#attribute-i-indexes">indexes</a></li>
              <li><a target="docwin" href="#method-i-method_missing">method_missing</a></li>
              <li><a target="docwin" href="#method-i-primary_key">primary_key</a></li>
              <li><a target="docwin" href="#method-i-primary_key_name">primary_key_name</a></li>
              <li><a target="docwin" href="#method-i-respond_to_missing-3F">respond_to_missing?</a></li>
              <li><a target="docwin" href="#method-i-spatial_index">spatial_index</a></li>
              <li><a target="docwin" href="#method-i-unique">unique</a></li>
            </ol>
          </div>
          <div id='context'>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>GENERIC_TYPES</td>
                    <td>=</td>
                    <td class='context-item-value'>
                      [String, Integer, Fixnum, Bignum, Float, Numeric, BigDecimal,
                      Date, DateTime, Time, File, TrueClass, FalseClass]
                    </td>
                    <td>&nbsp;</td>
                    <td class='context-item-desc'>
                      
                      <p>Classes specifying generic types that <a
                      href="../../Sequel.html">Sequel</a> will convert to database-specific
                      types.</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-columns'>columns</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>Return the column hashes created by this generator</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-constraints'>constraints</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>Return the constraint hashes created by this generator</p>
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>
                      <a name='attribute-i-indexes'>indexes</a>
                    </td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <p>Return the index hashes created by this generator</p>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-add_type_method'>
                <a name='method-c-add_type_method'></a>
                <div class='synopsis'>
                  <span class='name'>add_type_method</span>
                  <span class='arguments'>(*types)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a method for each of the given types that creates a column with that
                  type as a constant.  Types given should either already be constants/classes
                  or a capitalized string/symbol with the same name as a constant/class.</p>
                  
                  <p>Do not call this method with untrusted input, as that can result in
                  arbitrary code execution.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-add_type_method-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-add_type_method-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 50</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">add_type_method</span>(*<span class="ruby-identifier">types</span>)&#x000A;  <span class="ruby-identifier">types</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">type</span><span class="ruby-operator">|</span>&#x000A;    <span class="ruby-identifier">class_eval</span>(<span class="ruby-node">&quot;def #{type}(name, opts={}); column(name, #{type}, opts); end&quot;</span>, <span class="ruby-keyword">__FILE__</span>, <span class="ruby-keyword">__LINE__</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(db, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Set the database in which to create the table, and evaluate the block in
                  the context of this object.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 33</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">db</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@db</span> = <span class="ruby-identifier">db</span>&#x000A;  <span class="ruby-ivar">@columns</span> = []&#x000A;  <span class="ruby-ivar">@indexes</span> = []&#x000A;  <span class="ruby-ivar">@constraints</span> = []&#x000A;  <span class="ruby-ivar">@primary_key</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-identifier">instance_eval</span>(&amp;<span class="ruby-identifier">block</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">block</span>&#x000A;  <span class="ruby-ivar">@columns</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-ivar">@primary_key</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@primary_key</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">has_column?</span>(<span class="ruby-identifier">primary_key_name</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-check'>
                <a name='method-i-check'></a>
                <div class='synopsis'>
                  <span class='name'>check</span>
                  <span class='arguments'>(*args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Add an unnamed constraint to the DDL, specified by the given block or args:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">check</span>(:<span class="ruby-identifier">num=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">5</span>) <span class="ruby-comment"># CHECK num &gt;= 1 AND num &lt;= 5</span>&#x000A;<span class="ruby-identifier">check</span>{<span class="ruby-identifier">num</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>} <span class="ruby-comment"># CHECK num &gt; 5</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-check-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-check-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 61</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">check</span>(*<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">constraint</span>(<span class="ruby-keyword">nil</span>, *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-column'>
                <a name='method-i-column'></a>
                <div class='synopsis'>
                  <span class='name'>column</span>
                  <span class='arguments'>(name, type, opts = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a column with the given name, type, and opts to the DDL.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">column</span> :<span class="ruby-identifier">num</span>, :<span class="ruby-identifier">integer</span>&#x000A;<span class="ruby-comment"># num INTEGER</span>&#x000A;&#x000A;<span class="ruby-identifier">column</span> :<span class="ruby-identifier">name</span>, <span class="ruby-constant">String</span>, :<span class="ruby-identifier">null=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">false</span>, :<span class="ruby-identifier">default=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">'a'</span>&#x000A;<span class="ruby-comment"># name varchar(255) NOT NULL DEFAULT 'a'</span>&#x000A;&#x000A;<span class="ruby-identifier">inet</span> :<span class="ruby-identifier">ip</span>&#x000A;<span class="ruby-comment"># ip inet</span></pre>
                  
                  <p>You can also create columns via method missing, so the following are
                  equivalent:</p>
                  
                  <pre>column :number, :integer&#x000A;integer :number</pre>
                  
                  <p>The following options are supported:</p>
                  <dl class="rdoc-list note-list"><dt>:default 
                  <dd>
                  <p>The default value for the column.</p>
                  </dd><dt>:deferrable 
                  <dd>
                  <p>For foreign key columns, this ensures referential integrity will work even
                  if referencing table uses a foreign key value that does not yet exist on
                  referenced table (but will exist before the transaction commits). Basically
                  it adds DEFERRABLE INITIALLY DEFERRED on key creation. If you use
                  :immediate as the value, uses DEFERRABLE INITIALLY IMMEDIATE.</p>
                  </dd><dt>:index 
                  <dd>
                  <p>Create an index on this column.  If given a hash, use the hash as the
                  options for the index.</p>
                  </dd><dt>:key 
                  <dd>
                  <p>For foreign key columns, the column in the associated table that this
                  column references.  Unnecessary if this column references the primary key
                  of the associated table, except if you are using MySQL.</p>
                  </dd><dt>:null 
                  <dd>
                  <p>Mark the column as allowing NULL values (if true), or not allowing NULL
                  values (if false).  If unspecified, will default to whatever the database
                  default is.</p>
                  </dd><dt>:on_delete 
                  <dd>
                  <p>Specify the behavior of this column when being deleted (:restrict,
                  :cascade, :set_null, :set_default, :no_action).</p>
                  </dd><dt>:on_update 
                  <dd>
                  <p>Specify the behavior of this column when being updated (:restrict,
                  :cascade, :set_null, :set_default, :no_action).</p>
                  </dd><dt>:<a href="CreateTableGenerator.html#method-i-primary_key">#primary_key</a> 
                  <dd>
                  <p>Make the column as a single primary key column.  This should only be used
                  if you have a single, nonautoincrementing primary key column.</p>
                  </dd><dt>:primary_key_constraint_name 
                  <dd>
                  <p>The name to give the primary key constraint</p>
                  </dd><dt>:type 
                  <dd>
                  <p>Overrides the type given as the argument.  Generally not used by column
                  itself, but can be passed as an option to other methods that call column.</p>
                  </dd><dt>:unique 
                  <dd>
                  <p>Mark the column as unique, generally has the same effect as creating a
                  unique index on the column.</p>
                  </dd><dt>:unique_constraint_name 
                  <dd>
                  <p>The name to give the unique key constraint</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-column-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-column-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 111</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">column</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">columns</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>, <span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">type</span>}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">index_opts</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:index</span>]&#x000A;    <span class="ruby-identifier">index</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">index_opts</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">index_opts</span> <span class="ruby-operator">:</span> {})&#x000A;  <span class="ruby-keyword">end</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-constraint'>
                <a name='method-i-constraint'></a>
                <div class='synopsis'>
                  <span class='name'>constraint</span>
                  <span class='arguments'>(name, *args, &block)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds a named constraint (or unnamed if name is nil) to the DDL, with the
                  given block or args. To provide options for the constraint, pass a hash as
                  the first argument.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">constraint</span>(:<span class="ruby-identifier">blah</span>, :<span class="ruby-identifier">num=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">5</span>)&#x000A;<span class="ruby-comment"># CONSTRAINT blah CHECK num &gt;= 1 AND num &lt;= 5</span>&#x000A;<span class="ruby-identifier">constraint</span>({:<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">blah</span>, :<span class="ruby-identifier">deferrable=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword">true</span>}, :<span class="ruby-identifier">num=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">5</span>)&#x000A;<span class="ruby-comment"># CONSTRAINT blah CHECK num &gt;= 1 AND num &lt;= 5 DEFERRABLE INITIALLY DEFERRED</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-constraint-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-constraint-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 126</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">constraint</span>(<span class="ruby-identifier">name</span>, *<span class="ruby-identifier">args</span>, &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> {<span class="ruby-value">:name=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">name</span>}&#x000A;  <span class="ruby-identifier">constraints</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:type=</span><span class="ruby-operator">&gt;</span><span class="ruby-value">:check</span>, <span class="ruby-value">:check=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">args</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-foreign_key'>
                <a name='method-i-foreign_key'></a>
                <div class='synopsis'>
                  <span class='name'>foreign_key</span>
                  <span class='arguments'>(name, table=nil, opts = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a foreign key in the table that references another table to the DDL.
                  See column for available options.</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">foreign_key</span>(:<span class="ruby-identifier">artist_id</span>) <span class="ruby-comment"># artist_id INTEGER</span>&#x000A;<span class="ruby-identifier">foreign_key</span>(:<span class="ruby-identifier">artist_id</span>, :<span class="ruby-identifier">artists</span>) <span class="ruby-comment"># artist_id INTEGER REFERENCES artists</span>&#x000A;<span class="ruby-identifier">foreign_key</span>(:<span class="ruby-identifier">artist_id</span>, :<span class="ruby-identifier">artists</span>, :<span class="ruby-identifier">key=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">id</span>) <span class="ruby-comment"># artist_id INTEGER REFERENCES artists(id)</span>&#x000A;<span class="ruby-identifier">foreign_key</span>(:<span class="ruby-identifier">artist_id</span>, :<span class="ruby-identifier">artists</span>, :<span class="ruby-identifier">type=</span><span class="ruby-operator">&gt;</span><span class="ruby-constant">String</span>) <span class="ruby-comment"># artist_id varchar(255) REFERENCES artists(id)</span></pre>
                  
                  <p>Additional Options:</p>
                  <dl class="rdoc-list note-list"><dt>:foreign_key_constraint_name 
                  <dd>
                  <p>The name to give the foreign key constraint</p>
                  </dd></dl>
                  
                  <p>If you want a foreign key constraint without adding a column (usually
                  because it is a composite foreign key), you can provide an array of columns
                  as the first argument, and you can provide the :name option to name the
                  constraint:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">foreign_key</span>([:<span class="ruby-identifier">artist_name</span>, :<span class="ruby-identifier">artist_location</span>], :<span class="ruby-identifier">artists</span>, :<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">artist_fk</span>)&#x000A;<span class="ruby-comment"># ADD CONSTRAINT artist_fk FOREIGN KEY (artist_name, artist_location) REFERENCES artists</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-foreign_key-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-foreign_key-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 149</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">foreign_key</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">table</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">opts</span> = <span class="ruby-keyword">case</span> <span class="ruby-identifier">table</span>&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>&#x000A;    <span class="ruby-identifier">table</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>&#x000A;    <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:table=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">table</span>)&#x000A;  <span class="ruby-keyword">when</span> <span class="ruby-constant">NilClass</span>&#x000A;    <span class="ruby-identifier">opts</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-identifier">raise</span>(<span class="ruby-constant">Error</span>, <span class="ruby-string">&quot;The second argument to foreign_key should be a Hash, Symbol, or nil&quot;</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">composite_foreign_key</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">opts</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;  <span class="ruby-identifier">column</span>(<span class="ruby-identifier">name</span>, <span class="ruby-constant">Integer</span>, <span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-full_text_index'>
                <a name='method-i-full_text_index'></a>
                <div class='synopsis'>
                  <span class='name'>full_text_index</span>
                  <span class='arguments'>(columns, opts = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a full text index on the given columns to the DDL.</p>
                  
                  <p>PostgreSQL specific options:</p>
                  <dl class="rdoc-list note-list"><dt>:index_type 
                  <dd>
                  <p>Can be set to :gist to use a GIST index instead of the default GIN index.</p>
                  </dd><dt>:language 
                  <dd>
                  <p>Set a language to use for the index (default: simple).</p>
                  </dd></dl>
                  
                  <p>Microsoft <a href="../SQL.html">SQL</a> Server specific options:</p>
                  <dl class="rdoc-list note-list"><dt>:key_index 
                  <dd>
                  <p>The KEY INDEX to use for the full text index.</p>
                  </dd></dl>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-full_text_index-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-full_text_index-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 173</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">full_text_index</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">index</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:full_text</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-has_column-3F'>
                <a name='method-i-has_column-3F'></a>
                <div class='synopsis'>
                  <span class='name'>has_column?</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='description'>
                  
                  <p>True if the DDL includes the creation of a column with the given name.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-has_column-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-has_column-3F-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 178</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_column?</span>(<span class="ruby-identifier">name</span>)&#x000A;  <span class="ruby-identifier">columns</span>.<span class="ruby-identifier">any?</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span>}&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-index'>
                <a name='method-i-index'></a>
                <div class='synopsis'>
                  <span class='name'>index</span>
                  <span class='arguments'>(columns, opts = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add an index on the given column(s) with the given options to the DDL.
                  General options:</p>
                  <dl class="rdoc-list note-list"><dt>:name 
                  <dd>
                  <p>The name to use for the index. If not given, a default name based on the
                  table and columns is used.</p>
                  </dd><dt>:type 
                  <dd>
                  <p>The type of index to use (only supported by some databases)</p>
                  </dd><dt>:unique 
                  <dd>
                  <p>Make the index unique, so duplicate values are not allowed.</p>
                  </dd><dt>:where 
                  <dd>
                  <p>Create a partial index (only supported by some databases)</p>
                  </dd></dl>
                  
                  <p>PostgreSQL specific options:</p>
                  <dl class="rdoc-list note-list"><dt>:concurrently 
                  <dd>
                  <p>Create the index concurrently, so it doesn’t block operations on the table
                  while the index is being built.</p>
                  </dd><dt>:opclass 
                  <dd>
                  <p>Use a specific operator class in the index.</p>
                  </dd></dl>
                  
                  <p>Microsoft <a href="../SQL.html">SQL</a> Server specific options:</p>
                  <dl class="rdoc-list note-list"><dt>:include 
                  <dd>
                  <p>Include additional column values in the index, without actually indexing on
                  those values.</p>
                  </dd></dl>
                  
                  <pre>index :name&#x000A;# CREATE INDEX table_name_index ON table (name)&#x000A;index [:artist_id, :name]&#x000A;# CREATE INDEX table_artist_id_name_index ON table (artist_id, name)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-index-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-index-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 208</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">indexes</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:columns</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">columns</span>)}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-method_missing'>
                <a name='method-i-method_missing'></a>
                <div class='synopsis'>
                  <span class='name'>method_missing</span>
                  <span class='arguments'>(type, name = nil, opts = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a column with the given type, name, and opts to the DDL.  See
                  <code>column</code> for available options.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-method_missing-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-method_missing-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 214</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">name</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">column</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">opts</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">super</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-primary_key'>
                <a name='method-i-primary_key'></a>
                <div class='synopsis'>
                  <span class='name'>primary_key</span>
                  <span class='arguments'>(name, *args)</span>
                </div>
                <div class='description'>
                  
                  <p>Adds an autoincrementing primary key column or a primary key constraint to
                  the DDL. To just create a constraint, the first argument should be an array
                  of column symbols specifying the primary key columns. To create an
                  autoincrementing primary key column, a single symbol can be used. In both
                  cases, an options hash can be used as the second argument.</p>
                  
                  <p>If you want to create a primary key column that is not autoincrementing,
                  you should not use this method.  Instead, you should use the regular
                  <code>column</code> method with a <code>:primary_key=&gt;true</code>
                  option.</p>
                  
                  <p>If an array of column symbols is used, you can specify the :name option to
                  name the constraint.</p>
                  
                  <p>Examples:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">primary_key</span>(:<span class="ruby-identifier">id</span>)&#x000A;<span class="ruby-identifier">primary_key</span>([:<span class="ruby-identifier">street_number</span>, :<span class="ruby-identifier">house_number</span>], :<span class="ruby-identifier">name=</span><span class="ruby-operator">&gt;</span>:<span class="ruby-identifier">some</span> <span class="ruby-identifier">constraint_name</span>)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-primary_key-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-primary_key-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 239</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">primary_key</span>(<span class="ruby-identifier">name</span>, *<span class="ruby-identifier">args</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-identifier">composite_primary_key</span>(<span class="ruby-identifier">name</span>, *<span class="ruby-identifier">args</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)&#x000A;  <span class="ruby-ivar">@primary_key</span> = <span class="ruby-ivar">@db</span>.<span class="ruby-identifier">serial_primary_key_options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>})&#x000A;  &#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span>&#x000A;    <span class="ruby-identifier">opts</span> = {<span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">opts</span>} <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">type</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">pop</span>&#x000A;      <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">type</span>)&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-ivar">@primary_key</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">opts</span>)&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-ivar">@primary_key</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-primary_key_name'>
                <a name='method-i-primary_key_name'></a>
                <div class='synopsis'>
                  <span class='name'>primary_key_name</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  
                  <p>The name of the primary key for this generator, if it has a primary key.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-primary_key_name-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-primary_key_name-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 254</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">primary_key_name</span>&#x000A;  <span class="ruby-ivar">@primary_key</span>[<span class="ruby-value">:name</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@primary_key</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-respond_to_missing-3F'>
                <a name='method-i-respond_to_missing-3F'></a>
                <div class='synopsis'>
                  <span class='name'>respond_to_missing?</span>
                  <span class='arguments'>(meth, include_private)</span>
                </div>
                <div class='description'>
                  
                  <p>This object responds to all methods.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-respond_to_missing-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-respond_to_missing-3F-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 219</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">respond_to_missing?</span>(<span class="ruby-identifier">meth</span>, <span class="ruby-identifier">include_private</span>)&#x000A;  <span class="ruby-keyword">true</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-spatial_index'>
                <a name='method-i-spatial_index'></a>
                <div class='synopsis'>
                  <span class='name'>spatial_index</span>
                  <span class='arguments'>(columns, opts = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a spatial index on the given columns to the DDL.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-spatial_index-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-spatial_index-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 259</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">spatial_index</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">index</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:spatial</span>))&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-unique'>
                <a name='method-i-unique'></a>
                <div class='synopsis'>
                  <span class='name'>unique</span>
                  <span class='arguments'>(columns, opts = OPTS)</span>
                </div>
                <div class='description'>
                  
                  <p>Add a unique constraint on the given columns to the DDL.</p>
                  
                  <pre>unique(:name) # UNIQUE (name)</pre>
                  
                  <p>Supports the same :deferrable option as <a
                  href="CreateTableGenerator.html#method-i-column">column</a>. The :name
                  option can be used to name the constraint.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-unique-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-unique-source'><span class="ruby-comment"># File lib/sequel/database/schema_generator.rb, line 269</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">unique</span>(<span class="ruby-identifier">columns</span>, <span class="ruby-identifier">opts</span> = <span class="ruby-constant">OPTS</span>)&#x000A;  <span class="ruby-identifier">constraints</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-value">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:unique</span>, <span class="ruby-value">:columns</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">columns</span>)}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">opts</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
