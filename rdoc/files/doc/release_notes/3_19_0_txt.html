<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>3.19.0.txt</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <h1 class='name'>3.19.0.txt</h1>
        <div class='paths'>
          doc/release_notes/3.19.0.txt
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>2013-11-08 08:08:17 -0500</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <h1 id="label-New+Features">New Features</h1>
            <ul><li>
            <p>The add_* association methods now accept a primary key, and associates the
            receiver to the associated model object with that primary key:</p>
            
            <pre>artist.add_album(42)&#x000A;# equivalent to: artist.add_album(Album[42])</pre>
            </li><li>
            <p>The validation_class_methods plugin now has the ability to reflect on
            validations:</p>
            
            <pre class="ruby"><span class="ruby-constant">Album</span>.<span class="ruby-identifier">plugin</span> :<span class="ruby-identifier">validation_class_methods</span>&#x000A;<span class="ruby-constant">Album</span>.<span class="ruby-identifier">validates_acceptance_of</span>(:<span class="ruby-identifier">a</span>)&#x000A;<span class="ruby-constant">Album</span>.<span class="ruby-identifier">validation_reflections</span>&#x000A;<span class="ruby-comment"># =&gt; {:a=&gt;[[:acceptance, {:tag=&gt;:acceptance, :allow_nil=&gt;true,</span>&#x000A;            :<span class="ruby-identifier">message=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;is not accepted&quot;</span>, :<span class="ruby-identifier">accept=</span><span class="ruby-operator">&gt;</span><span class="ruby-string">&quot;1&quot;</span>}]]}</pre>
            </li></ul>
            
            <h1 id="label-Other+Improvements">Other Improvements</h1>
            <ul><li>
            <p>In the postgres, mysql, and sqlite adapters, typecasting now uses methods
            instead of procs.  Since methods aren’t closures (while procs are), this
            makes typecasting faster (up to 15%).</p>
            </li><li>
            <p>When typecasting model column values, the classes of the new and existing
            values are checked in addition to the values themselves. Previously, if the
            new and existing values were equal (i.e. 1.0 and 1), it wouldn’t update the
            value.  Now, if the classes are different, it always updates the value.</p>
            </li><li>
            <p>Date and DateTime objects are now handled correctly when using prepared
            statements/bound variables in the jdbc adapter.</p>
            </li><li>
            <p>Date, DateTime, Time, true, false, and SQL::Blob objects are now handled
            correctly when using prepared statements/bound variables in the sqlite
            adapter.</p>
            </li><li>
            <p><a href="../../../classes/Sequel.html">Sequel</a> now uses varbinary(max)
            instead of image for the generic File (blob) type on Microsoft SQL Server. 
            This makes it possible to use an SQL::Blob object as a prepared statement
            argument.</p>
            </li><li>
            <p><a href="../../../classes/Sequel.html">Sequel</a> now handles blobs better
            in the Amalgalite adapter.</p>
            </li><li>
            <p>When disconnecting a connection using the sqlite adapter, all open prepared
            statements are now closed first.  Previously, attempting to disconnect a
            connection with open prepared statements resulted in an error.</p>
            </li><li>
            <p>The license file has been renamed from COPYING to MIT-LICENSE, to make it
            easier to determine at a glance which license is used.</p>
            </li></ul>
            
            <h1 id="label-Backwards+Compatibility">Backwards Compatibility</h1>
            <ul><li>
            <p>Because <a href="../../../classes/Sequel.html">Sequel</a> switched the
            generic File type from image to varbinary(max) on Microsoft SQL Server, any
            migrations/schema modification methods that used the File type will now
            result in a different column type than before.</p>
            </li><li>
            <p>The MYSQL_TYPE_PROCS, PG_TYPE_PROCS, and SQLITE_TYPE_PROCS constants have
            been removed from the mysql, postgres, and sqlite adapters, respectively. 
            The UNIX_EPOCH_TIME_FORMAT and FALSE_VALUES constants have also been
            removed from the sqlite adapter.</p>
            </li><li>
            <p>Typecasting in the sqlite adapters now uses to_i and to_f instead of
            Integer() and Float() with rescues.  If you put non-numeric data in numeric
            columns on SQLite, this could cause problems.</p>
            </li></ul>
          </div>
          <div id='context'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
